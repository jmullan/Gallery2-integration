<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
	<title>Geeklog G2Bridge Plugin [v2.0]</title>
	<style type="text/css">
		h2 { color: #666; background-color: #f1f1f1; text-align: left; width: 90%; padding: 4px; border: solid 1px #ccc; }
		h3 { color: #666; background-color: #f1f1f1; text-align: left; width: 90%; padding: 4px; border: solid 1px #ccc; }
		a:link { 
		color: #333; 
		background:transparent;
		text-decoration:none; 
		}
		a:visited { 
		color: #333; 
		background:transparent;
		text-decoration:none; 
		}
		a:hover {
		color: #ccc; 
		background:transparent;
		text-decoration:none; 
		}
		a:active { 
		color: #333; 
		background:transparent;
		text-decoration:none; 
		}
		img {
		border:0;
		}
		#wrapper { text-align: left; width:800px; margin: 4px; padding: 4px; border: solid 1px #ccc; }
		.warn { color: red; font-weight: bold; }
		A.warn { text-decoration: none; }
		code, pre { font-family: monaco, monospace; font-size: 10px; }
		div.codebox { background-color: #DFDBFF; border: 1px solid #57658D; padding: 5px; margin: 15px 15px 15px 15px; }
		.question { font-weight: bold; padding: 5px 10px; }
		.answer { padding: 5px 20px; }
		.new { font-weight: bold; color: green; font-size: small; }
		.fix { font-weight: bold; color: maroon; font-size: small; }
		.security { color: red; font-weight: bold; font-size: small; }
		.thanks { font-size: small; }
		.conf_option { color: purple; font-size: small; }
.ds5 /*agl rulekind: base;*/ { font-size: 22px; font-weight: bold; }
</style>
</head>
<body bgcolor="#ffffff">
<div align="center">
<div id="wrapper">
				<img src="G2Bridge.png" alt="" height="28" width="48" border="0">    <span class="ds5">G2Bridge Plugin [v2.0]</span> <br>
				by Wayne Patterson [<a href="mailto://suprsidr@gmail.com">suprsidr@gmail.com</a>]<br>
				5th Aug. 2007
				<h3>Table of Contents</h3>
				<ul>
	<li><a href="#description">Description</a></li>
			<li><a href="#version">Version History</a></li>
			<li><a href="#install">Installing The Plugin</a></li>
			<li><a href="#config">Configuring The Plugin</a></li>
			<li><a href="#admin">The Admin Section</a></li>
			<li><a href="#upgrade">Upgrading The Plugin</a></li>
			<li><a href="#remove">Removing The Plugin</a></li>
			<li><a href="#license">License</a></li>
		</ul>

<h3><a name=description></a>Description</h3>

<p>G2Bridge is a geeklog plugin which allows integration of the <a href="http://gallery.menalto.com/">Gallery2</a> image gallery into your Geeklog site.

<p>By default, it installs a random photo block, which is enabled, and a Gallery2 control block [the G2 sidebar], which is disabled.
The control block is explained on the G2Bridge admin page.  <b>In order for the random photo block to work, you must have the 'Image Block' module installed.</b>  [You can find it on the G2 <a href="http://codex.gallery2.org/index.php/Gallery2:Download">downloads page</a>.]


		<p>Note that G2Bridge does not map group permissions from one to the other.


		<h3><a name=version></a>Version History</h3>
		<ul>
			<li>v2.0 [5 Aug 2007]<ul>
					<li><span class=fix>[fix]</span> Updated GL detection of anon user for 1.4.1. Minor cleanup of other functions.
					<li><span class=fix>[fix]</span> Gallery2 sidebar now displays properly in rightblocks.
				
					<li><span class=new>[new]</span> Added option for displaying <b>Flash XML MiniSlideShow </b>in blocks.
				</ul>
			</li>
			<li>v1.1 [5 Apr 2006] 
				<ul>
					<li><span class=new>[new]</span> Added option for displaying left and right blocks in <b>config.php</b></li>
					<li><span class=fix>[fix]</span> Now correctly maps users that pre-exsist in both apps, no more collisions.
					<li><span class=fix>[fix]</span> Gallery2 sidebar now displays properly.
				</ul>
			</li>
			<li>v1.0 [18 Mar 2006] Forked to G2Bridge from GL_Gallery2 for compatibility with Gallery 2.1 by Wayne Patterson [<a href="mailto:suprsidr@gmail.com">suprsidr@gmail.com]</a> <a href="http://www.4wiseguys.com" target="_blank">http://www.4wiseguys.com</a>
				<ul>
					<li><span class=new>[new]</span> Fully updated Gallery 2.1 API
					<li><span class=new>[new]</span> Added option for My Gallery link (for use with User Album Module) as apposed to Gallery2 link in User Menu
					<li><span class=new>[new]</span> Added option for alternate login redirect in <b>config.php </b>
					<li><span class=fix>[fix]</span> Now adds installing user to G2 Admin Group instead of mapping user to G2 admin user
					<li><span class=fix>[fix]</span> <b>No More Path Confusion</b> :)
				</ul>
		</ul>
		<h3><a name=install></a>Installing The Plugin</h3>
		
		
A note on paths:
<ul>
	<li>a path beginning with ./ is where the plugin's config.php may be found</li>
	<li>&lt;public_html&gt; is where your lib-common.php file may be found</li>
	<li>&lt;geeklog_dir&gt; is where your config.php file for geeklog may be found</li>
</ul>
		<ol>
<li>First off, make sure you have a working Gallery2 installation and a working Geeklog installation.</li>

<li>If you have G2's <b>URL Rewrite module</b> installed, deactivate and remove it.  Re-install it <b>through the
embedded version</b> after you've completed the installation of the plugin and verified that the installation works properly.  This will ensure that the correct paths are used for rewriting.</li>

<li>Backup your Geeklog database because the G2Bridge plugin adds and modifies tables.
You can do this with the built in database backup facility in the Admin menu.</li>

<li>Uncompress the G2Bridge plugin archive while in the &lt;geeklog_dir&gt;/plugins directory.
The archive will create a directory called G2Bridge.</li>

<li>In your &lt;public_html&gt;/admin/plugins/ directory create a directory called G2Bridge.</li>

<li>In your &lt;public_html&gt; directory, create a directory called G2Bridge.</li>

<li>Copy the files in the ./admin directory to the &lt;public_html&gt;/admin/plugins/G2Bridge/ directory you created in step 5.</li>

<li>Copy the files and directories in the ./public_html directory to the &lt;public_html&gt;/G2Bridge/
directory you created in step 6.</li>

<li>Configure your plugin by setting paths and options in the <b>./config.php</b> file.</li>

<li>Login as the user who will be the admin for the G2 installation. Go to the plugin administration page.
The G2Bridge plugin should show up with a link to install it.  Click it.  The install page will tell you if the install
was successful or not.  If not, examine the Geeklog system errorlog in &lt;geeklog_dir&gt;/logs to see
what the problem was.  Fix it and re-install.</li>

<li><span class="warn">Note:</span> This plugin creates blocks which you should not remove manually.
It is fine to disable them, but the plugin expects them to exist.
They will be removed if you choose to remove the plugin.</li>
</ol>
		<h3><a name=config></a>Configuring The Plugin</h3>
		
		
The only thing you <i>must</i> do is configure your paths  in your G2Bridge <b>config.php</b>.  These are explained in the  file.
		<p><span class="conf_option">$_G2B_CONF['public_dir']</span> allows you to name the public_html portion of the G2Bridge plugin whatever you want.
		<p><span class="conf_option">$_G2B_CONF['random_photo_fields']</span> allows you to specify what data should be displayed in the random photo block.

<p><span class="conf_option">$_G2B_CONF['allow_anon_access_random_photo']</span> and <span class="conf_option">$_G2B_CONF['allow_anon_access_gallery']</span> specify what should be visible to anonymous users.


		<p><span class="conf_option">$_G2B_CONF['user_albums']</span> lets you select what type of link will appear in the user menu. &quot;My Gallery&quot; or  &quot;Gallery2&quot;</p>
		<p><span class="conf_option">$_G2B_CONF['login_redirect']</span> can be set if you use a custom login page for your geeklog site. <b><font color="#ff3300">Note: if you are experiencing unresolvable redirects in your browser set this to ' '</font></b></p>
		<p>All other configuration is done through your Gallery2 admin page.

		
		
		
		
		<br>
		<h3><a name=admin></a>The Admin Section</h3>
		<ul>
			<li>Within the admin page &lt;site_admin_url&gt;/plugins/G2Bridge/index.php there are a few option for your control.
			<li>Control the Gallery2 SideBar Block's visibility.
			<li>Sync your Geeklog&amp; Gallery2 users should they ever fall out of sync.
			<li><span class=new>[new]</span>Create Blocks containing my Flash XML MiniSlideShow to display your albums like the random photo block.</ul>
		<h3><a name=upgrade></a>Upgrading The Plugin</h3>
		
		

Upgrading G2Bridge is very similar to installation:


		<ol>
<li>Backup your Geeklog database because upgrading may add or modify database tables.
You can do this with the built in database backup facility in the Admin menu.</li>

<li>Disable G2Bridge using the admin interface's plugin editor [Admin->Plugins->G2Bridge]</li>

<li>Uncompress the G2Bridge plugin and copy the new files over the old ones as if it were a new installation.</li>

<li>Enable G2Bridge using the admin interface [Admin->Plugins->G2Bridge]</li>

<li>Go back to the plugin editor for G2Bridge [Admin->Plugins->G2Bridge] and click the 'Update' button.</li>
</ol>
		<h3><a name=remove></a>Removing The Plugin</h3>
		<ol>
<li>Because the plugin modifies several database tables, it should <b>always</b> be removed through the interface provided.
Log in to your Geeklog as a root user and go to the plugin administration page.  Click the 'G2Bridge'
link and then click the 'Delete' button.  It will ask you to confirm it.  Confirm it.</li>

<li>Delete the three plugin directories created in the install process:
	<ul>
		<li>&lt;geeklog-dir&gt;/plugins/G2Bridge/</li>
		<li>&lt;public_html&gt;/G2Bridge/ [OR whatever you changed the name to in your config.php]</li>
		<li>&lt;public_html&gt;/admin/plugins/G2Bridge/</li>
	</ul>
</li>
			<li>There is no step three.</li>
		</ol>
		<h3><a name=license></a>License</h3>
		
		
The G2Bridge plugin is licensed under the GPL even though I don't really understand it and all its implications.
</div></div>
</body>

</html>
